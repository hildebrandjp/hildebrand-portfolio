<div class="modal-ext-container modal-portfolio-container hidden" data-modal-page="portfolio-index">
    <div class="portfolio-container">
        <div class="chip-tags-title">
            {% for portfolio_object in site.data.portfolio.tags %}
                {% include components/shared/chip.html title=portfolio_object.title tag=portfolio_object.tag color=portfolio_object.color %}
            {% endfor %}
        </div>

        <div class="portfolio-content">
            {% for portfolio in site.data.portfolio.data %}
            <div class="portfolio-item" data-tag="{{portfolio.tag}}">
                {% assign card_color = portfolio.color | default: "" %}
                <div class="card card-margin-top-fix"
                    {% if card_color != "" %}
                        style="background: {{ card_color }} !important;"
                    {% endif %}
                >
                    <div class="card-body" style="background-color: inherit;"
                    >
                        <div class="card-body-wrapper">
                            <p class="subtitle">{{ portfolio.subtitle }}</p>
                            <h3 class="title">{{ portfolio.title }}</h3>
                        </div>
                    </div>
                </div>
                <div class="card-preview"
                    {% if portfolio.url and portfolio.url != '' %}
                        style="background-image: url('{{ portfolio.url }} !important;');"
                    {% endif %}
                >
                    <div class="overlay"></div>
                    <button class="icon-btn hide btnPlayIcon" data-portfolio-id="{{portfolio.id}}">
                        <i class="play-icon">â–¶</i>
                    </button>
                    <button class="icon-btn hide btnShareIcon" data-portfolio-id="{{portfolio.id}}">
                        <i class="link-icon">ðŸ”—</i>
                    </button>
                </div>
            </div>
            {% endfor %}
        </div>
    </div>
</div>


<script type="module">
    $(document).ready(() => {
        if (window?.modules?.CardAnimationEffect) {
            window.modules.CardAnimationEffect.enableAnimationCardHover();
            window.modules.CardAnimationEffect.enableHoverShowButtonsCardPreview();
        }
    });

    (() => {
        class PortfolioIndex {
            constructor() {
                this.buttonEvents();
            }

            buttonEvents() {
                $('.btnPlayIcon').on('click', (event) => this.playButtonClicked(event));
            }

            playButtonClicked(event) {
                const portfolioId = $(event.currentTarget).data('portfolio-id');
                document.getElementById('modalOverlay2').classList.remove('hidden');
                $('.modal-ext-container-2').removeClass('hidden');
                console.log('Play portfolio video with ID:', portfolioId);
            }
        }

        $(document).ready(() => {
            window.modules = window.modules || {};
            window.modules.PortfolioIndex = new PortfolioIndex();
        });
    })(); // <-- FIXED (added `()`)
</script>